<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>함수 스코프 </title>
<body>
<script>
let globalMessage = "전역 변수입니다"; // 전역 스코프

function showMessage() {
 let localMessage = "지역 변수입니다"; // 함수 스코프 (지역 변수)
 console.log(globalMessage); // 전역 변수 접근 가능
 console.log(localMessage); // 지역 변수 접근 가능
}

showMessage(); // 정상 실행
console.log(globalMessage); // 전역 변수 접근 가능
// console.log(localMessage); // 오류! 함수 밖에서는 접근 불가

function createCounter() {
 let count = 0; // 외부에서 직접 접근할 수 없는 '비밀' 변수

 return function() {
 count++; // 클로저를 통해 count에 접근
 return count;
 };
}

let counter = createCounter();
console.log(counter()); // 1
console.log(counter()); // 2
console.log(counter()); // 3

let userName = "김개발"; // 전역 변수

function greetUser() {
 let greeting = "안녕하세요"; // 지역 변수
 console.log(greeting + ", " + userName + "님!");
}

function showUserInfo() {
 let userAge = 20; // 지역 변수
 console.log(userName + "님의 나이: " + userAge);
 // console.log(greeting); // 오류! 다른 함수의 지역 변수는 접근 불가
}

greetUser(); // "안녕하세요, 김개발님!"
showUserInfo(); // "김개발님의 나이: 20"
console.log(userName); // "김개발" - 전역 변수는 어디서든 접근 가능

function createSecureCounter(initialValue = 0) {
 let count = initialValue;

 return {
 increment: function() {
 count++;
 return count;
 },
 decrement: function() {
 count--;
 return count;
 },
 getValue: function() {
 return count;
 }
 };
}

let myCounter = createSecureCounter(10);
console.log(myCounter.getValue()); // 10
console.log(myCounter.increment()); // 11
console.log(myCounter.decrement()); // 10
// console.log(count); // 오류! count는 외부에서 직접 접근 불가

function createShoppingCart() {
 let items = []; // 외부에서 직접 수정할 수 없는 안전한 배열

 return {
 addItem: function(product, quantity = 1) {
 items.push({ product, quantity });
 console.log(`${product} ${quantity}개가 장바구니에 추가되었습니다.`);
 },

 removeItem: function(product) {
 items = items.filter(item => item.product !== product);
 console.log(`${product}이(가) 장바구니에서 제거되었습니다.`);
 },

 getItems: function() {
 return [...items]; // 원본 배열의 복사본 반환 (안전성 확보)
 },

 getItemCount: function() {
 return items.length;
 }
 };
}

// 사용 예제
let cart = createShoppingCart();
cart.addItem("노트북", 1);
cart.addItem("마우스", 2);
console.log("장바구니 상품 수:", cart.getItemCount()); // 2
console.log("장바구니 내용:", cart.getItems());


</script>
</body>
</html>

<!--
함수 스코프: 함수마다 독립적인 변수 영역을 가짐
- 전역 변수: 모든 곳에서 접근 가능하지만 남용하면 위험
- 지역 변수: 함수 내에서만 사용 가능하여 안전함
- 클로저: 함수가 생성 시점의 환경을 기억하는 특별한 능력
-->